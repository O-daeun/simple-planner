# 주간 시간표 UX 기획 정리

본 문서는 주간 시간표 기반 일정 관리 UI의 UX 기획을 정리한 문서이다.  
구현 전 프론트엔드 기준 동작 규칙 및 사용자 흐름을 명확히 하기 위함이다.

---

## 1️⃣ 기본 인터랙션 (주간 시간표 + 더블클릭)

### 기본 구조

- 주간 시간표는 **월 ~ 일 × 시간 단위** 그리드로 구성된다.
- 기본 시간 단위는 **1시간**이다.

### 일정 생성 / 수정

- 빈 셀 또는 기존 일정 셀을 **더블클릭**하면 편집 모드로 진입한다.
- 편집 모드에서는 해당 셀이 `textarea` 입력 상태로 변경된다.

### 저장 규칙

- 입력 후 다음 동작 중 하나가 발생하면 저장된다.
  - `Enter` 입력
  - 포커스 아웃(blur, 다른 곳 클릭)

### 키보드 규칙

- `Enter` : 저장
- `Shift + Enter` : 줄바꿈
- `ESC` : 편집 취소 (저장되지 않음)

### 기본값

- 색상: **연한 회색**
- 반복: 없음

### UX 평가

- Google Calendar 등에서 사용하는 정석적인 UX 패턴
- 더블클릭 → 편집 진입 흐름이 직관적이며 학습 비용이 낮음

---

## 2️⃣ 편집 모드 상단 아이콘 영역

### 기본 상태

편집 모드 진입 시 상단에 다음 아이콘이 표시된다.

- 🎨 색상
- 🔁 반복
- 🗑 삭제

---

## 3️⃣ 색상 선택 UX

### 색상 아이콘 클릭 시

- 상단 아이콘 영역이 **색상 팔레트 UI**로 전환된다.

### 색상 구성

- 총 **14개 색상**
  - 상단: 연한 색 7개  
    (회 / 빨 / 주 / 노 / 초 / 파 / 보)
  - 하단: 진한 색 7개  
    (회 / 빨 / 주 / 노 / 초 / 파 / 보)

### 색상 적용 규칙

- 연한 색 선택 시
  - 배경: 연한 색
  - 텍스트: 진한 색
- 진한 색 선택 시
  - 배경: 진한 색
  - 텍스트: 연한 색

### 기본 선택

- 연한 회색이 기본 선택 상태

### 선택 완료 후

- 색상 선택 즉시 적용
- 색상 팔레트 UI 종료
- 다시 (색 / 반복 / 삭제) 아이콘 영역으로 복귀

### 구현 참고

- 색상은 enum + theme map 형태로 관리

```ts
type BlockColor =
  | "gray_light"
  | "red_light"
  | "orange_light"
  | "yellow_light"
  | "green_light"
  | "blue_light"
  | "purple_light"
  | "gray_dark"
  | "red_dark"
  | "orange_dark"
  | "yellow_dark"
  | "green_dark"
  | "blue_dark"
  | "purple_dark";

const COLOR_THEME = {
  gray_light: { bg: "#F1F3F5", text: "#495057" },
  gray_dark: { bg: "#495057", text: "#F8F9FA" },
  // ...
};
```

## 4️⃣ 반복 설정 UX

### 반복 버튼 클릭 시

- 반복 버튼을 클릭하면 반복 설정 UI가 노출된다.
- 반복 설정의 기본값은 **없음**이다.

### 반복 옵션

- 없음
- 매일
- 매주

### 매일

- 선택 시 해당 일정이 매일 반복된다.

### 매주

- 월 / 화 / 수 / 목 / 금 / 토 / 일 중 요일을 **복수 선택**할 수 있다.
- 선택된 요일마다 일정이 반복된다.

### 반복 종료

- **반복 종료** 체크박스를 제공한다.
- 체크 시 반복 종료 날짜를 설정할 수 있다.
- 날짜 선택 방식은 **연 / 월 / 일 드롭다운**이다.

### 저장

- ✔ 체크(저장) 버튼 클릭 시 반복 설정이 적용된다.
- 설정 완료 후 기본 아이콘 영역(색 / 반복 / 삭제 버튼)으로 복귀한다.

### UX 판단

- `n일마다`, `n주마다` 등의 세부 옵션은 의도적으로 제공하지 않는다.
- 대부분의 사용자 케이스에 충분한 단순한 구조를 우선한다.

## 5️⃣ 반복 일정 수정 진입 플로우 (중요)

- 반복 일정이 적용된 일정을 **더블클릭**할 경우,
  편집 모드 진입 전에 먼저 **수정 범위 선택 UI**를 노출한다.

### 수정 범위 선택 옵션

- 이 일정만 수정
- 이후 일정 모두 수정
- 전체 반복 일정 수정

- 수정 범위 선택 후 편집 모드로 진입한다.

### 기술적 의미

- 수정 범위 선택은 이후 API 동작을 결정하는 핵심 기준이다.
- 내부적으로 다음과 같은 값으로 분기된다.

```ts
editScope: "SINGLE" | "FUTURE" | "ALL";
```

## 6️⃣ 삭제 UX (반복 일정 포함)

### 삭제 버튼 클릭

- 편집 모드에서 삭제 버튼을 클릭하면 삭제 플로우가 시작된다.

### 반복 일정인 경우

- 해당 일정이 반복 일정에 포함되어 있다면 삭제 범위 선택 UI를 노출한다.
- 사용자는 다음 옵션 중 하나를 선택해야 한다.
  - 이 일정만 삭제
  - 이후 일정 모두 삭제
  - 전체 반복 일정 삭제

### 확인 절차

- 삭제 범위를 선택한 후 추가 confirm 모달을 한 번 더 노출한다.
- confirm 모달에는 다음 안내 문구를 포함한다.
  - “이 작업은 되돌릴 수 없습니다.”

### UX 판단

- 반복 일정은 실수로 삭제될 가능성이 높다.
- 따라서 삭제 시 반드시 **이중 확인 절차**를 거치도록 설계한다.

---

## 7️⃣ IA(페이지 구조) & 라우팅 초안

### 페이지(라우트)

- `/login` : 로그인 랜딩(구글 OAuth 버튼)
- `/plan/day` : 일간 플래닝(로그인 후 기본 도착)
- `/plan/week` : 주간 시간표(헤더 네비로 이동)
- (추후) `/settings` : 로그아웃/계정/환경설정 등

### 접근 제어(가드)

- `/planning`, `/weekly`는 **비로그인 접근 시 `/login`으로 이동**한다.
- API도 서버에서 사용자 검증을 수행한다. (401/403 등)

---

## 8️⃣ 로그인 플로우(시작점)

### 8.1 로그인 페이지(`/login`)

#### UI

- 앱 로고/간단 설명
- **“Google로 로그인” 버튼**

#### 동작

- 버튼 클릭 → Google OAuth(NextAuth) 시작
- 로그인 성공 → **`/plan/day`으로 리다이렉트**

#### 예외

- 이미 로그인 상태로 `/login` 접근 시 → **`/plan/day`으로 자동 이동**
- OAuth 실패 시 → 토스트/에러 문구 노출 + 재시도 가능

### 8.2 로그인 후 리다이렉트 규칙

- 기본: **`/plan/day`**
- 보호 페이지(예: `/plan/day`)를 먼저 열었다면: `callbackUrl`로 원래 목적지 복귀

---

## 9️⃣ 공통 레이아웃(로그인 이후)

### 9.1 헤더(상단 고정)

- 좌측: 앱명/로고 (클릭 시 `/plan/day`)
- 중앙(또는 좌측 메뉴): 네비게이션
  - **일간(Planning)** → `/plan/day`
  - **주간(Weekly)** → `/plan/week`
- 우측: 사용자 프로필(아바타/이름)
  - 드롭다운: 로그아웃

### 9.2 공통 UX 가이드

- 날짜/주 이동(페이징) 시 URL과 상태를 동기화한다. (새로고침/공유/뒤로가기 안정)
- 데이터 로딩 중에는 스켈레톤 또는 최소한의 로딩 표시를 제공한다.
- 저장 실패 시 입력값은 유지하고, 재시도 안내(토스트 등)를 제공한다.

---

## 🔟 일간 플래닝 페이지(`/plan/day`)

### 10.1 화면 구성(2열)

#### 좌측(메인): 일간 시간표(0시~24시)

- 세로축: 시간(0~24)
- 시간 단위 기본값: **1시간**
- 일정 생성/수정/저장/키보드 규칙은 **1️⃣의 규칙을 그대로 적용**한다.

#### 우측(사이드바): 3개 박스(세로 고정)

1. **오늘의 목표**: 텍스트(짧은 문장 중심)
2. **해야할 것(Top 3)**: 체크박스 3개(고정)
3. **메모**: 자유 메모(긴 텍스트 가능)

### 10.2 날짜 이동(일 단위 페이징)

#### UI(권장)

- `< 이전날` | `YYYY.MM.DD (요일)` | `다음날 >`
- (선택) `오늘로` 버튼

#### 동작

- 이전/다음/오늘 클릭 시 해당 날짜의 시간표 + 우측 3박스 데이터를 로드한다.
- URL 동기화 권장: `?date=YYYY-MM-DD`

### 10.3 저장 규칙(일간 페이지 공통)

- 우측 3박스 입력은 다음 중 하나에서 저장된다.
  - blur(포커스 아웃)
  - (선택) 명시적 저장 버튼(자동 저장이 불안할 때 대비)
- 저장 실패 시:
  - 토스트로 실패 안내
  - 입력값은 유지(사용자 입력 손실 방지)

---

## 1️⃣1️⃣ 주간 시간표 페이지(`/plan/week`)

### 11.1 화면 구성(주간 그리드)

- 가로 7열: **월 ~ 일**
- 세로 0~24시: 시간 라인이 연속으로 표시됨
- 일정 생성/편집 기본 규칙은 **1️⃣의 더블클릭 편집 UX**를 적용한다.

### 11.2 주 이동(주 단위 페이징)

#### UI(권장)

- `< 이전주` | `YYYY.MM.DD ~ YYYY.MM.DD` | `다음주 >`
- (선택) `이번 주로` 버튼

#### 동작

- 이전/다음/이번 주 클릭 시 해당 주의 데이터를 로드한다.
- URL 동기화 권장: `?weekStart=YYYY-MM-DD` (월요일 기준)

### 11.3 반복 일정 편집/삭제 플로우 연결

- 반복 일정 더블클릭 시: **5️⃣ 수정 범위 선택 UI**를 먼저 노출한다.
- 삭제 버튼 클릭 시: **6️⃣ 삭제 범위 선택 + 2중 확인**을 적용한다.

---

## 1️⃣2️⃣ “페이징” 정의(이 프로젝트에서의 의미)

이 문서에서 “페이징”은 리스트 페이지네이션이 아니라 **기간 이동(날짜/주 단위 내비게이션)**을 의미한다.

### 일간 페이징

- 단위: 날짜(이전날/다음날/오늘)
- URL: `?date=YYYY-MM-DD`

### 주간 페이징

- 단위: 주(이전주/다음주/이번 주)
- URL: `?weekStart=YYYY-MM-DD` (월요일 기준)

---

## 1️⃣3️⃣ 최소 구현 순서(MVP)

- 1단계: `/login` → Google OAuth → `/plan/day` 리다이렉트 + 보호 라우팅(가드)
- 2단계: `/plan/day` 레이아웃(좌 시간표 + 우측 3박스) + 날짜 이동 UI/URL 동기화
- 3단계: 시간표 블록 CRUD(더블클릭 편집, Enter/blur 저장, ESC 취소) + 색상(3️⃣) 적용
- 4단계: `/plan/week` 그리드 + 주 이동 UI/URL 동기화 + 반복/삭제 범위 플로우(5️⃣, 6️⃣) 연결
- 5단계: 로딩/에러/재시도 UX(토스트, 스켈레톤, 입력값 보존) 강화
